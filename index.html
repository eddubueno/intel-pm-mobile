<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Apoio Operacional</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Tema claro futurista */
      --bg:#e5f0ff;
      --bg2:#f9fafb;
      --panel:#ffffff;
      --ink:#0f172a;
      --muted:#64748b;
      --line:rgba(15,23,42,.12);
      --accent:#0ea5e9;
      --accent-soft:#e0f2fe;
      --accent2:#22c55e;
      --radius:16px;
      --shadow:0 18px 40px rgba(15,23,42,.10);
    }

    *{box-sizing:border-box;margin:0;padding:0}

    html,body{
      height:100%;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,sans-serif;
      background:radial-gradient(1200px 800px at 0% 0%, var(--bg) 0%, var(--bg2) 40%, #ffffff 100%);
      color:var(--ink);
    }

    .wrap{
      min-height:100%;
      display:flex;
      flex-direction:column;
    }

    header{
      position:sticky;
      top:0;
      z-index:10;
      backdrop-filter:blur(12px);
      background:linear-gradient(180deg,rgba(248,250,252,.92),rgba(248,250,252,.86));
      border-bottom:1px solid rgba(148,163,184,.25);
    }

    .bar{
      max-width:1040px;
      margin:0 auto;
      padding:12px 16px;
      display:flex;
      align-items:center;
      gap:10px;
    }

    .brand-wrap{
      display:flex;
      align-items:center;
      gap:8px;
    }

    .brand-logo{
      width:28px;
      height:28px;
      border-radius:10px;
      background:conic-gradient(from 180deg at 50% 50%, #0ea5e9, #22c55e, #0ea5e9);
      position:relative;
      overflow:hidden;
    }
    .brand-logo::before{
      content:"";
      position:absolute;
      inset:-40%;
      background:radial-gradient(circle at 30% 10%, rgba(255,255,255,.9) 0, transparent 50%),
                 radial-gradient(circle at 80% 90%, rgba(15,23,42,.45) 0, transparent 55%);
      opacity:.85;
    }

    .brand{
      font-weight:800;
      font-size:.9rem;
      letter-spacing:.18em;
      text-transform:uppercase;
      color:#0f172a;
    }

    .status{
      font-family:"Space Mono",monospace;
      font-size:.75rem;
      padding:3px 8px;
      border-radius:999px;
      background:rgba(148,163,184,.10);
      color:var(--muted);
      border:1px solid rgba(148,163,184,.45);
    }

    .grow{flex:1}

    main{
      max-width:1040px;
      margin:16px auto 26px;
      padding:0 16px 16px;
    }

    .card{
      border-radius:18px;
      border:1px solid var(--line);
      background:var(--panel);
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    .card-head{
      padding:10px 14px;
      border-bottom:1px solid rgba(148,163,184,.35);
      display:flex;
      align-items:center;
      gap:12px;
    }

    .card-title{
      font-weight:700;
      font-size:.9rem;
      letter-spacing:.16em;
      text-transform:uppercase;
      color:#0f172a;
    }

    .card-head-right{
      margin-left:auto;
      display:flex;
      align-items:center;
      gap:8px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .search-wrap{
      display:flex;
      align-items:center;
      gap:6px;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.7);
      background:rgba(248,250,252,.95);
    }

    .search-icon{
      font-size:.8rem;
      color:var(--muted);
    }

    #filtro{
      border:none;
      background:transparent;
      outline:none;
      font-size:.8rem;
      color:var(--ink);
      min-width:0;
    }

    #filtro::placeholder{
      color:rgba(148,163,184,.9);
    }

    .btn-mini{
      border-radius:999px;
      border:1px solid rgba(148,163,184,.7);
      background:rgba(248,250,252,.9);
      padding:4px 10px;
      font-size:.75rem;
      color:var(--muted);
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:4px;
      white-space:nowrap;
    }
    .btn-mini:hover{
      background:#e2f3ff;
      color:#0369a1;
      border-color:#0ea5e9;
    }

    .card-body{
      padding:10px 14px 16px;
    }

    .section-title{
      display:flex;
      align-items:center;
      gap:8px;
      margin:10px 0 6px;
    }

    .section-dot{
      width:9px;
      height:9px;
      border-radius:999px;
      background:var(--accent);
    }

    .section-label{
      font-size:.8rem;
      font-weight:600;
      letter-spacing:.10em;
      text-transform:uppercase;
      color:#0f172a;
    }

    .grid{
      display:grid;
      gap:10px;
    }

    .cols-2{grid-template-columns:repeat(2, minmax(0,1fr))}
    .cols-3{grid-template-columns:repeat(3, minmax(0,1fr))}
    .cols-4{grid-template-columns:repeat(4, minmax(0,1fr))}

    @media (max-width:900px){
      .cols-3,.cols-4{grid-template-columns:repeat(2, minmax(0,1fr))}
    }
    @media (max-width:600px){
      .cols-2,.cols-3,.cols-4{grid-template-columns:minmax(0,1fr)}
    }

    .qbtn{
      display:flex;
      align-items:flex-start;
      gap:8px;
      border-radius:14px;
      padding:9px 10px;
      border:1px solid rgba(148,163,184,.6);
      background:linear-gradient(135deg,rgba(248,250,252,1),rgba(241,245,249,1));
      cursor:pointer;
      transition:transform .06s ease, box-shadow .12s ease, border-color .12s ease, background .12s ease;
      text-align:left;
    }

    .qbtn:hover{
      transform:translateY(-1px);
      border-color:#0ea5e9;
      box-shadow:0 10px 22px rgba(15,23,42,.12);
      background:linear-gradient(135deg,#f9fbff,#e0f2fe);
    }

    .qbtn-ico{
      width:1.6rem;
      font-size:1.2rem;
      text-align:center;
    }

    .qbtn-main{
      display:block;
      font-size:.85rem;
      font-weight:600;
      color:#0f172a;
    }

    .qbtn-meta{
      display:block;
      font-size:.72rem;
      color:var(--muted);
    }

    .qbtn-remove{
      margin-left:auto;
      font-size:.8rem;
      color:#94a3b8;
      cursor:pointer;
      padding-left:4px;
    }

    .custom-empty{
      font-size:.78rem;
      color:var(--muted);
      margin-top:4px;
    }

    .custom-form{
      margin-top:8px;
      padding:8px 10px;
      border-radius:12px;
      background:var(--accent-soft);
      border:1px solid rgba(56,189,248,.7);
      display:none;
      grid-template-columns:1.1fr 1.3fr auto;
      gap:8px;
      align-items:center;
    }

    .custom-form input{
      width:100%;
      padding:6px 8px;
      border-radius:10px;
      border:1px solid rgba(148,163,184,.7);
      font-size:.8rem;
      outline:none;
      background:#eff6ff;
      color:#0f172a;
    }

    .custom-form input::placeholder{
      color:rgba(148,163,184,.9);
    }

    .btn-save{
      border-radius:999px;
      border:none;
      padding:6px 12px;
      background:#0ea5e9;
      color:white;
      font-size:.8rem;
      font-weight:600;
      cursor:pointer;
      white-space:nowrap;
    }

    .btn-save:hover{
      background:#0284c7;
    }

    footer{
      margin-top:auto;
      padding:10px 16px 16px;
      font-size:.78rem;
      color:var(--muted);
      text-align:center;
    }
  </style>
</head>
<body>
<div class="wrap" id="appRoot">

  <header>
    <div class="bar">
      <div class="brand-wrap">
        <div class="brand-logo"></div>
        <div>
          <div class="brand">APOIO OPERACIONAL</div>
          <div class="status">console</div>
        </div>
      </div>
      <div class="grow"></div>
    </div>
  </header>

  <main>
    <section class="card">
      <!-- TOPO: Meus atalhos + busca -->
      <div class="card-head">
        <div class="card-title">Meus atalhos</div>
        <div class="card-head-right">
          <div class="search-wrap">
            <span class="search-icon">üîç</span>
            <input id="filtro" placeholder="Buscar atalhos">
          </div>
          <button class="btn-mini" id="btnLimpar">Limpar</button>
          <button class="btn-mini" id="btnToggleCustom">‚ûï Novo atalho</button>
        </div>
      </div>

      <div class="card-body">

        <!-- Form novo atalho -->
        <div class="custom-form" id="customForm">
          <input id="novoNome" placeholder="Nome do atalho (ex.: Sistema interno)">
          <input id="novoURL" placeholder="URL completa (https://...)">
          <button class="btn-save" id="btnAddAtalho">Salvar</button>
        </div>

        <!-- Grid Meus atalhos -->
        <div class="grid cols-4" id="grupo-custom" style="margin-top:8px"></div>
        <div class="custom-empty" id="vazioCustom">Nenhum atalho personalizado cadastrado.</div>

        <!-- SEPARADOR -->
        <div style="border-top:1px dashed rgba(148,163,184,.5); margin:14px 0 10px;"></div>

        <!-- ABAIXO: atalhos padr√£o -->

        <!-- Pessoa -->
        <div class="section-title">
          <div class="section-dot"></div>
          <div class="section-label">Pessoa</div>
        </div>
        <div class="grid cols-3" id="grupo-pessoa"></div>

        <!-- Ve√≠culo -->
        <div class="section-title">
          <div class="section-dot"></div>
          <div class="section-label">Ve√≠culo</div>
        </div>
        <div class="grid cols-3" id="grupo-veiculo"></div>

        <!-- Documentos / Empresas -->
        <div class="section-title">
          <div class="section-dot"></div>
          <div class="section-label">Documentos / Empresas</div>
        </div>
        <div class="grid cols-3" id="grupo-docs"></div>

        <!-- Justi√ßa / Tribunais -->
        <div class="section-title">
          <div class="section-dot"></div>
          <div class="section-label">Justi√ßa / Tribunais</div>
        </div>
        <div class="grid cols-3" id="grupo-justica"></div>

        <!-- Receita Federal -->
        <div class="section-title">
          <div class="section-dot"></div>
          <div class="section-label">Receita Federal</div>
        </div>
        <div class="grid cols-2" id="grupo-receita"></div>

      </div>
    </section>
  </main>

  <footer>
    Apoio Operacional ‚Äî ajuste os links conforme os sistemas autorizados na sua unidade.
  </footer>
</div>

<script>
  const $  = sel => document.querySelector(sel);
  const $$ = sel => Array.from(document.querySelectorAll(sel));

  function toast(msg){
    const t = document.createElement('div');
    t.textContent = msg;
    t.style.position = 'fixed';
    t.style.left = '50%';
    t.style.bottom = '18px';
    t.style.transform = 'translateX(-50%)';
    t.style.background = 'rgba(15,23,42,.95)';
    t.style.color = '#e5f0ff';
    t.style.border = '1px solid rgba(148,163,184,.8)';
    t.style.padding = '6px 10px';
    t.style.borderRadius = '999px';
    t.style.zIndex = 50;
    t.style.fontSize = '.8rem';
    t.style.boxShadow = '0 10px 20px rgba(15,23,42,.35)';
    document.body.appendChild(t);
    setTimeout(()=> t.remove(), 1600);
  }

  function openUrl(url){
    if(url) window.open(url, '_blank', 'noopener');
  }

  /* Atalhos padr√£o */
  const BASE_ATALHOS = {
    pessoa: [
      {nome:'Consulta CPF ‚Äî Receita', sigla:'cpf pessoa receita', url:'https://servicos.receita.fazenda.gov.br/servicos/cpf/consultasituacao/consultapublica.asp', ico:'üÜî'},
      {nome:'Consulta processos ‚Äî TJSP', sigla:'tjsp pessoa processo', url:'https://esaj.tjsp.jus.br/cpopg/open.do', ico:'‚öñÔ∏è'},
      {nome:'BNMP ‚Äî Mandados', sigla:'bnmp mandados pessoa', url:'https://portalbnmp.cnj.jus.br/#/captcha/%2Fpesquisa-peca', ico:'üóÇÔ∏è'},
    ],
    veiculo: [
      {nome:'Detran-SP ‚Äî Ve√≠culos', sigla:'detran sp veiculo', url:'https://www.detran.sp.gov.br', ico:'üöó'}
    ],
    docs: [
      {nome:'Consulta CNPJ ‚Äî Receita', sigla:'cnpj empresa receita', url:'https://solucoes.receita.fazenda.gov.br/servicos/cnpjreva/Cnpjreva_Solicitacao.asp', ico:'üè¢'},
      {nome:'Validade de selo ‚Äî TJSP', sigla:'tjsp selo cartorio', url:'https://extrajudicial.tjsp.jus.br/validade-selo', ico:'‚úÖ'},
    ],
    justica: [
      {nome:'BNMP ‚Äî Mandados', sigla:'bnmp cnj justica', url:'https://portalbnmp.cnj.jus.br/#/captcha/%2Fpesquisa-peca', ico:'üóÇÔ∏è'},
      {nome:'TJSP ‚Äî Consulta Processo', sigla:'tjsp processo justica', url:'https://esaj.tjsp.jus.br/cpopg/open.do', ico:'‚öñÔ∏è'},
    ],
    receita: [
      {nome:'Consulta CPF', sigla:'cpf receita', url:'https://servicos.receita.fazenda.gov.br/servicos/cpf/consultasituacao/consultapublica.asp', ico:'üÜî'},
      {nome:'Consulta CNPJ', sigla:'cnpj receita', url:'https://solucoes.receita.fazenda.gov.br/servicos/cnpjreva/Cnpjreva_Solicitacao.asp', ico:'üè¢'},
    ]
  };

  const LS_KEY = 'apoiooperacional.custom.shortcuts';
  const loadCustom = () => JSON.parse(localStorage.getItem(LS_KEY) || '[]');
  const saveCustom = (arr) => localStorage.setItem(LS_KEY, JSON.stringify(arr));

  const boxPessoa   = $('#grupo-pessoa');
  const boxVeiculo  = $('#grupo-veiculo');
  const boxDocs     = $('#grupo-docs');
  const boxJustica  = $('#grupo-justica');
  const boxReceita  = $('#grupo-receita');
  const boxCustom   = $('#grupo-custom');
  const vazioCustom = $('#vazioCustom');

  function renderBtn(item, isCustom=false, idx=null){
    const b = document.createElement('button');
    b.className = 'qbtn';
    b.setAttribute('data-name', (item.nome || '').toLowerCase());
    b.setAttribute('data-sigla', (item.sigla || '').toLowerCase());

    let host = '';
    try{ host = new URL(item.url).hostname; }catch{}

    b.innerHTML = `
      <span class="qbtn-ico">${item.ico || 'üîó'}</span>
      <span>
        <span class="qbtn-main">${item.nome}</span>
        <span class="qbtn-meta">${host}</span>
      </span>
    `;

    b.addEventListener('click', () => openUrl(item.url));

    if(isCustom){
      const rem = document.createElement('span');
      rem.className = 'qbtn-remove';
      rem.textContent = '‚úï';
      rem.title = 'Remover atalho';
      rem.addEventListener('click', (e) => {
        e.stopPropagation();
        const cur = loadCustom();
        cur.splice(idx,1);
        saveCustom(cur);
        renderAll();
        toast('Atalho removido');
      });
      b.appendChild(rem);
    }

    return b;
  }

  function renderGroup(container, items, isCustom=false){
    container.innerHTML = '';
    items.forEach((it, i) => container.appendChild(renderBtn(it, isCustom, i)));
  }

  function filterItems(items, term){
    if(!term) return items;
    return items.filter(it =>
      it.nome.toLowerCase().includes(term) ||
      (it.sigla || '').toLowerCase().includes(term)
    );
  }

  function renderAll(){
    const term = ($('#filtro').value || '').trim().toLowerCase();

    const pessoa  = filterItems(BASE_ATALHOS.pessoa, term);
    const veiculo = filterItems(BASE_ATALHOS.veiculo, term);
    const docs    = filterItems(BASE_ATALHOS.docs, term);
    const just    = filterItems(BASE_ATALHOS.justica, term);
    const rec     = filterItems(BASE_ATALHOS.receita, term);
    const custom  = filterItems(loadCustom(), term);

    renderGroup(boxPessoa,  pessoa,  false);
    renderGroup(boxVeiculo, veiculo, false);
    renderGroup(boxDocs,    docs,    false);
    renderGroup(boxJustica, just,    false);
    renderGroup(boxReceita, rec,     false);
    renderGroup(boxCustom,  custom,  true);

    vazioCustom.style.display = custom.length ? 'none' : 'block';
  }

  renderAll();

  // Busca / limpar
  $('#filtro').addEventListener('input', renderAll);
  $('#btnLimpar').addEventListener('click', () => {
    $('#filtro').value = '';
    renderAll();
  });

  // Form novo atalho (toggle)
  const customForm = $('#customForm');
  $('#btnToggleCustom').addEventListener('click', () => {
    const showing = customForm.style.display === 'grid';
    customForm.style.display = showing ? 'none' : 'grid';
  });

  $('#btnAddAtalho').addEventListener('click', () => {
    const nome = ($('#novoNome').value || '').trim();
    const url  = ($('#novoURL').value  || '').trim();

    if(!nome || !url){
      toast('Informe nome e URL completa');
      return;
    }
    try{
      new URL(url);
    }catch{
      toast('URL inv√°lida');
      return;
    }

    const cur = loadCustom();
    cur.unshift({nome, url, sigla:nome, ico:'‚≠ê'});
    saveCustom(cur);

    $('#novoNome').value = '';
    $('#novoURL').value  = '';
    renderAll();
    toast('Atalho salvo');
  });

  // Teclas r√°pidas 1..9
  document.addEventListener('keydown', (e) => {
    if(e.altKey || e.ctrlKey || e.metaKey) return;
    const n = parseInt(e.key, 10);
    if(isNaN(n) || n < 1) return;

    const visibles = $$('.qbtn');
    const idx = n - 1;
    if(visibles[idx]) visibles[idx].click();
  });
</script>
</body>
</html>
